<Page
    x:Class="GuessMate.Views.Pages.GuessesPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:GuessMate.Views.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="GuessesPage"
    d:DataContext="{d:DesignInstance local:GuessesPage,
                                     IsDesignTimeCreatable=False}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
    ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    mc:Ignorable="d">

    <StackPanel>

        <!--  Add word  -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <ui:TextBox
                Grid.Row="0"
                Grid.Column="0"
                Width="200"
                VerticalAlignment="Center"
                PlaceholderText="Enter word..."
                Text="{Binding ViewModel.NewWord, UpdateSourceTrigger=PropertyChanged}">
                <ui:TextBox.InputBindings>
                    <KeyBinding Key="Enter" Command="{Binding ViewModel.AddWordCommand}" />
                </ui:TextBox.InputBindings>
            </ui:TextBox>
            <StackPanel
                Grid.Row="0"
                Grid.Column="2"
                VerticalAlignment="Center"
                Orientation="Horizontal">
                <ui:Button
                    Margin="0,0,10,0"
                    Appearance="Primary"
                    Command="{Binding ViewModel.AddWordCommand}"
                    Content="Add"
                    Icon="{ui:SymbolIcon Symbol=Add24}" />
                <ui:Button
                    Margin="0,0,10,0"
                    Appearance="Secondary"
                    Command="{Binding ViewModel.SaveWordsCommand}"
                    Content="Save"
                    Icon="{ui:SymbolIcon Symbol=Save24}" />
                <ui:Button
                    Margin="0,0,10,0"
                    Appearance="Secondary"
                    Command="{Binding ViewModel.LoadWordsCommand}"
                    Content="Load"
                    Icon="{ui:SymbolIcon Symbol=ArrowUpload24}" />
                <ui:Button
                    Appearance="Danger"
                    Command="{Binding ViewModel.ResetWordsCommand}"
                    Content="Reset"
                    Icon="{ui:SymbolIcon Symbol=ArrowReset24}" />
            </StackPanel>
            <ui:InfoBar
                Title="Instructions"
                Grid.Row="1"
                Grid.ColumnSpan="3"
                Margin="0,10,0,0"
                VerticalAlignment="Center"
                IsClosable="False"
                IsOpen="True"
                Message="Enter a word in the TextBox and add it to the list below. Under each word you wrote, you can select the background color from Wordle for each letter composing the word. Once done, don't forget to save!"
                Severity="Informational" />
        </Grid>

        <!--  Words Tree  -->
        <ItemsControl Margin="0,10,0,0" ItemsSource="{Binding ViewModel.Words}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <ui:CardExpander Margin="0,0,0,10">
                        <!--  Word Header  -->
                        <ui:CardExpander.Header>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <ui:TextBlock Grid.Row="0" FontTypography="BodyStrong">
                                    <Run Text="Word" />
                                    <Run Text="{Binding Index}" />
                                    <Run Text="-" />
                                    <Run Text="{Binding Word}" />
                                </ui:TextBlock>
                                <ui:TextBlock
                                    Grid.Row="1"
                                    Foreground="{ui:ThemeResource TextFillColorSecondaryBrush}"
                                    Text="Expand to see letters" />
                            </Grid>
                        </ui:CardExpander.Header>

                        <!--  Letters inside the expander  -->
                        <ItemsControl ItemsSource="{Binding Letters}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <ui:CardControl Margin="0,0,0,10">
                                        <ui:CardControl.Header>
                                            <ui:TextBlock FontTypography="BodyStrong">
                                                <Run Text="Letter" />
                                                <Run Text="{Binding Character}" />
                                            </ui:TextBlock>
                                        </ui:CardControl.Header>
                                        <!--  Color ComboBox  -->
                                        <ComboBox
                                            MinWidth="200"
                                            SelectedValue="{Binding Color, Mode=TwoWay}"
                                            SelectedValuePath="Content">
                                            <ComboBoxItem Content="Gray" Tag="Gray" />
                                            <ComboBoxItem Content="Yellow" Tag="Yellow" />
                                            <ComboBoxItem Content="Green" Tag="Green" />
                                        </ComboBox>
                                    </ui:CardControl>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ui:CardExpander>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </StackPanel>
</Page>